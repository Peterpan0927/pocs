//
//  main.m
//  NotificationsTest
//
//  Created by Gabe on 1/3/21.
//

#import <Foundation/Foundation.h>


@interface CoolNotification : NSObject
- (void)listenForEventName;
@end

@implementation CoolNotification

- (void)listenForEventName
{
    NSDistributedNotificationCenter *nc = [NSDistributedNotificationCenter defaultCenter];
    while(true)
    {
        [nc addObserver:self selector:@selector(omniNotificationReceived:) name:@"com.apple.HIToolbox.endMenuTrackingNotification" object:nil];
        [nc removeObserver:self name:@"com.apple.HIToolbox.endMenuTrackingNotification" object:nil];   
    }
}

- (void)omniNotificationReceived:(NSNotification *)notification
{
    NSLog(@"%@", notification.name);
    if(notification.object)
        NSLog(@"object(%@): %@", NSStringFromClass([notification.object class]), notification.object);
    if(notification.userInfo)
        NSLog(@"%@", notification.userInfo);
}
@end

int main(int argc, const char * argv[]) {
    NSLog(@"Jello, World!");
    __unused CoolNotification *cool = [[CoolNotification alloc] init];
    [cool listenForEventName];
    return 0;
}
